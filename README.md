FamilySearch Automation Application
Version 1.1.5
Created by SolutionStream for FamilySearch

The Lighthouse Automation App is a GUI-based application running on Electron, whose UI is created with React.js, and uses javascript packages such as Puppeteer, Lighthouse, glob, and p-limit, among others. This application aids in conducting Lighthouse Audits under a variety of different methods, such as accessibility, and streamlines audits to occur automatically and concurrently, in order to accomplish auditing all pages with minimal manual user input. This app's flexible and customizable approach allows for conducting as many audits as possible with the minimal required effort, allowing potentially entire websites to be audited in one process.

App features:

This application uses Google Chrome's Puppeteer web-scraping library to launch an instance of Chrome for the url to a website, either inputted by the user, or streamlined through a series of urls provided by the user. Lighthouse then uses Puppeteer to conduct a Lighthouse Audit, scanning the page for elements of accessibility either absent or present, and then writes a JSON file to the computer to be viewed by the user.

When the user generates an audit, they have the choice to audit the site using one of three interfaces - Desktop, with a window width of 1920 pixels, Mobile, with a width of 500, and all sizes, which gives unique audit results for widths of 500, 900, 1280, and 1920 pixels. Such audit results are stored in a single JSON file, which just contains all 4 JSON objects for each of those widths audited.

JSON files generated by FamilySearch Automation App contain information pertaining to the user's type of audit conducted, to give feedback on the webpage's features, first by providing a score for the user, and then a list of items within the page that require updating by the site administrator.

Each of these JSON files are categorized by the way they were generated into one of three folders: Custom Audits, Concurrent Audits, and Old Audits. The Custom Audits folder contains all audits completed individually through the application's 'Test One' feature. The Concurrent Audits folder contains all audits most recently completed by the application's 'Test All' feature. Then, the Old Audits folder contains all concurrent audits that have been pushed to the Old Audits folder by the user, to be compared/contrasted, or viewed at the user's leisure.

The application contains a feature to seamlessly transfer all audits from the Concurrent Audits folder to the Old Audits folder, to allow for customizability.

The application's settings feature is included in the main menu as 'View/Change Files'. Included in this page is the following:

Change Initial URL - this is the base URL that will be used to conduct concurrent audits. All paths within the 'Change Paths' text box will be sequentially used to individually combine with the base URL to conduct concurrent audits.

Change Paths - this is a list of url paths, relative to the base URL, to conduct concurrent audits.

Change Access Key - this is the user's Secret Agent Key, which functions to enable the user to access websites that would otherwise be blocked by firewalls and systems alike within a website's security features. Many websites take measures to prevent bots from skimming their sites, and Puppeteer, combined with Lighthouse, often is recognized as a bot from many websites, making the Secret Agent Key necessary for being able to bypass their security features and access the site. You will need to contact an administrator of the site you're looking to audit in order to get a Secret Agent Key generated specific to your computer's IP address.

Publishing a new release from scratch:

Installing a new version of this application will require the following:
  - The up-to-date source code, extracted from its zip file (either download from the repository's main page or releases)
  - all packages installed into the app's folder library on the user's computer via npm install
  - the project folder is linked to github in order to track updates and pull requests
  - create two new folders at the project's root: bin and chrome-browser.
  - Node.js as a standalone executable. You can find a link <a href="https://nodejs.org/en/download">here</a>. Download the prebuilt node.js for your operating system by choosing from the options.
      - Place node.js into the bin folder in the project.
  - Chrome for Testing. You can find a link <a href="https://googlechromelabs.github.io/chrome-for-testing/#stable">here</a>. For mac users, copy and paste the link under the platform mac-arm64. For windows users, copy and paste the link under the platform win64.
      - Place all downloaded contents into the chrome-browser folder of the project.
  - Increase the patch version in package.json, either by updating package.json's version variable, or run npm version patch to bump up the patch. It's important that the patch number is higher than the current one, or else a new release will not go through and you will receive an error message in the console after attempting to install.

Once accomplishing those steps, type the following command and hit enter:

run npm run release:win

This will execute the following commands, as listed in package.json:
npm run build
electron builder --win --publish=always

If the following is properly completed, the compiling and creation of a new application will commmence, and you'll receive a build and dist folder. Build will contain the necessary files to run the app independently, and dist will contain the .exe or .dmg files, according to whichever operating system you're running the release for. Most of the time it should be just windows, but there may be mac users using it too.

Folder contents:

Audit_Logic - contains .mjs files that handle the logic for running tests, processing results, and creating viewable json files containing the results of tests.

Audits - contains folders where finished audits will be placed.

Page_Logic - contains .jsx files that handle the logic for viewing finished .json files.

Pages - contains .jsx files that render the UI for each page on the application.
- AuditOne.jsx contains UI and logic for rendering each type of possible test.
- AuditAll.jsx contains UI and logic for rendering each type of concurrent possible test.

Reusables - Contains css code, react components, and other javascript files that are used throughout the code.
